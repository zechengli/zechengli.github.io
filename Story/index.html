<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Stories | Zecheng Li</title>
<link rel="stylesheet" href="../style.css" />
</head>
<body>

<nav class="navbar">
    <ul>
        <li><a href="/Home/">Home</a></li>
        <li><a href="/Education/">Education</a></li>
        <li><a href="/Research/">Research</a></li>
        <li><a href="/Work/">Work</a></li>
        <li><a href="/Sports/">Sports</a></li>
        <li><a href="/Others/">Others</a></li>
        <li><a href="/Story/">Story</a></li>
    </ul>
</nav>


<main class="container">


    <section class="content" id="story-list-view">
        <h2>Stories</h2>
        <ul class="story-list">
            <li>
                <a href="#" 
                   data-story-title="æˆ‘çš„æ™®åº¦æ•…äº‹"
                   data-story-meta="Dec 2025 Â· PhD Journey"
                   data-file="purdue.html">
                    <h3>ğŸ“Œ æˆ‘çš„æ™®åº¦æ•…äº‹</h3>
                    <p class="story-meta">Dec 2025 Â· PhD Journey</p>
                </a>
            </li>
        </ul>
    </section>


    <article class="content hidden" id="story-detail-view">
        <button id="back-to-list-btn" style="margin-bottom: 20px; cursor: pointer;">
            â† Back to Stories
        </button> 
        <h2 id="story-title"></h2>
        <p class="story-meta" id="story-meta"></p>
        <div id="story-content">Loading story...</div> 
    </article>


</main>


<script>
// ===================================
// DOM å…ƒç´ è·å–
// ===================================
const listView = document.getElementById('story-list-view');
const detailView = document.getElementById('story-detail-view');
const storyTitleEl = document.getElementById('story-title');
const storyMetaEl = document.getElementById('story-meta');
const storyContentEl = document.getElementById('story-content');
const storyLinks = document.querySelectorAll('.story-list a');
const backToListBtn = document.getElementById('back-to-list-btn');


// ===================================
// æ ¸å¿ƒé€»è¾‘å‡½æ•°
// ===================================

/**
 * @description æ˜¾ç¤ºæ•…äº‹åˆ—è¡¨è§†å›¾ã€‚
 */
function showList() {
    // åˆ‡æ¢è§†å›¾ï¼šæ˜¾ç¤ºåˆ—è¡¨ï¼Œéšè—è¯¦æƒ…
    detailView.classList.add('hidden');
    listView.classList.remove('hidden');
}

/**
 * @description å¼‚æ­¥åŠ è½½å¹¶æ˜¾ç¤ºæ•…äº‹è¯¦æƒ…è§†å›¾ã€‚
 * @param {HTMLElement} linkElement - è¢«ç‚¹å‡»çš„æ•…äº‹é“¾æ¥å…ƒç´ ã€‚
 */
async function showStory(linkElement) {
    const title = linkElement.getAttribute('data-story-title');
    const meta = linkElement.getAttribute('data-story-meta');
    const filePath = linkElement.getAttribute('data-file');

    // 1. åˆ‡æ¢è§†å›¾åˆ°è¯¦æƒ…é¡µï¼Œå¹¶æ˜¾ç¤ºåŠ è½½æç¤º
    storyTitleEl.textContent = title;
    storyMetaEl.textContent = meta;
    storyContentEl.innerHTML = 'Loading content...'; 
    listView.classList.add('hidden');
    detailView.classList.remove('hidden');

    try {
        // 2. ä½¿ç”¨ fetch API å¼‚æ­¥è·å– HTML ç‰‡æ®µæ–‡ä»¶
        const response = await fetch(filePath);
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        const htmlContent = await response.text();
        
        // 3. å°†åŠ è½½çš„å†…å®¹æ’å…¥åˆ°å®¹å™¨ä¸­
        storyContentEl.innerHTML = htmlContent;

    } catch (error) {
        console.error('Failed to load story content:', error);
        storyContentEl.innerHTML = 'Oops! Failed to load the story. Please check if the file: ' + filePath + ' exists.';
    }
}


// ===================================
// é¡µé¢åˆå§‹åŒ–å’Œäº‹ä»¶ç»‘å®š
// ===================================

// 1. ä¸ºåˆ—è¡¨ä¸­çš„æ•…äº‹é“¾æ¥æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
storyLinks.forEach(link => {
    link.addEventListener('click', function(event) {
        event.preventDefault(); // é˜»æ­¢é»˜è®¤è·³è½¬
        showStory(this);
    });
});

// 2. ä¸ºè¯¦æƒ…é¡µçš„â€œè¿”å›â€æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
backToListBtn.addEventListener('click', showList);

// 3. åˆå§‹åŠ è½½æ—¶æ˜¾ç¤ºåˆ—è¡¨
showList();

</script>

</body>
</html>
